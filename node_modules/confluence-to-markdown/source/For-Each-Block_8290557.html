<!DOCTYPE html>
<html>
    <head>
        <title>ORIGAM Documentation : For-Each Block</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ORIGAM Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Enterprise-Home_589829.html">ORIGAM Enterprise Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Architect_8716616.html">ORIGAM Architect</a></span>
                            </li>
                                                    <li>
                                <span><a href="Model-Reference_4620401.html">Model Reference</a></span>
                            </li>
                                                    <li>
                                <span><a href="Business-Logic-Model_1736812.html">Business Logic Model</a></span>
                            </li>
                                                    <li>
                                <span><a href="Sequential-Workflows_4620321.html">Sequential Workflows</a></span>
                            </li>
                                                    <li>
                                <span><a href="Blocks_8290553.html">Blocks</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ORIGAM Documentation : For-Each Block
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Tomáš Vavrda</span>, last modified by <span class='editor'> Zuzana Čapková</span> on Nov 19, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="section"><div class="section"><p>By using this block, you can perform a set of operations (tasks) on each repetition of a record in a data structure entity. You can think of it as if the XML data in the context store are sliced and sub-workflow (block) is executed for each slice.</p><h1 id="ForEachBlock-Attributes">Attributes</h1><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">IteratorXPath</th><td class="confluenceTd"><p>Enter an XPath expression, which will define the XML slice for the for-each iteration.</p><h4 id="ForEachBlock-ExampleiteratorXPaths:">Example iterator XPaths:</h4><p><code>/ROOT/Invoice</code> will iterate on every invoice in the context.</p><p><code>/ROOT/Invoice/InvoiceDetail </code>will iterate on every invoice detail in the context. The context will always include all the parent elements of InvoiceDetail, e.g. Invoice.</p><p><code>/ROOT/Invoice[State='Approved']</code> will iterate on every Invoice element, whose state is Approved. The context will include always 1 Invoice element with all the sub-elements (InvoiceDetails etc.).</p></td></tr><tr><th class="confluenceTh">SourceContextStore</th><td class="confluenceTd">Specifies the context store, on which the for-each operation will be based. As mentioned earlier, for each iteration the context store of this block will be filled only by the sliced data.</td></tr></tbody></table></div><h1 id="ForEachBlock-Example">Example</h1><h1 id="ForEachBlock-YouhavethefollowingXMLdatainyourcontext:"><span style="font-size: 14.0px;line-height: 1.4285715;">You have the following XML data in your context:</span></h1><div class="example"><div class="example-contents"><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;ROOT&gt;
    &lt;Invoice
		Id=&quot;1&quot;
		Number=&quot;123456&quot;
        ...
        &lt;InvoiceDetail
			LineNumber=&quot;1&quot;
			Text=&quot;ORIGAM&quot;
			Price=&quot;399&quot;
        /&gt;
    /&gt;
    &lt;Invoice
		Id=&quot;2&quot;
        ...
        /&gt;
    /&gt;
&lt;/ROOT&gt;</pre>
</div></div><p>In this case we have 2 invoices, each with some invoice details. Let's say we need to send an e-mail notification for each invoice. For this we will set up a for-each block, in which we will slice the Invoice context by Invoice element. In this case the block will be executed twice. The context on which we perform for-each will contain only the data slice inside the block. E.g. on every iteration the context will contain different invoice. The steps in the block can then repeat the same operation (e.g. compose and send an e-mail message), always with different data in each iteration.</p><p>All other context stores will be visible inside the for-each block and will contain all their data.</p></div></div></div></div>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 29, 2022 20:33</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
