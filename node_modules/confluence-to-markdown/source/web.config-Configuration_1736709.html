<!DOCTYPE html>
<html>
    <head>
        <title>ORIGAM Documentation : web.config Configuration</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ORIGAM Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Enterprise-Home_589829.html">ORIGAM Enterprise Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Runtime_8716600.html">ORIGAM Runtime</a></span>
                            </li>
                                                    <li>
                                <span><a href="Installation-and-Configuration_1277994.html">Installation and Configuration</a></span>
                            </li>
                                                    <li>
                                <span><a href="Configuration_7831576.html">Configuration</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ORIGAM Documentation : web.config Configuration
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Tomáš Vavrda</span>, last modified by <span class='editor'> Petr Hrehorovský</span> on Aug 31, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1656534815299 {padding: 0px;}
div.rbtoc1656534815299 ul {list-style: none !important;margin-left: 0px;}
div.rbtoc1656534815299 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1656534815299'>
<ul class='toc-indentation'>
<li><a href='#web.configConfiguration-PortalTitle'>Portal Title</a></li>
<li><a href='#web.configConfiguration-NoAccessUrl'>No Access Url</a></li>
<li><a href='#web.configConfiguration-RequestLimits'>Request Limits</a></li>
<li><a href='#web.configConfiguration-PasswordRecoverySupport'>Password Recovery Support</a></li>
<li><a href='#web.configConfiguration-Suppressingreporttabs'>Suppressing report tabs</a></li>
<li><a href='#web.configConfiguration-E-MailSettings'>E-Mail Settings</a>
<ul class='toc-indentation'>
<li><a href='#web.configConfiguration-PasswordRESET'>Password RESET</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="web.configConfiguration-PortalTitle">Portal Title</h1><p>This entry sets the title of the portal in the web browser.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Portal Title Example</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;appSettings&gt;
	&lt;add key=&quot;portalTitle&quot; value=&quot;MY ASAP APP&quot; /&gt;
&lt;/appSettings&gt;

</pre>
</div></div><h1 id="web.configConfiguration-NoAccessUrl">No Access Url</h1><p>If user logs into the application and doesn't have rights to any screen, she's redirected to so called &quot;no access page&quot;. By default it is <code>/NoAccess.cshtml</code>. It can be changed through the entry in <code>appSettings</code>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>No Access URL Example</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;appSettings&gt;
	&lt;add key=&quot;noAccessUrl&quot; value=&quot;/NoAccess2.cshtml&quot; /&gt;
&lt;/appSettings&gt;</pre>
</div></div><h1 id="web.configConfiguration-RequestLimits"><br/>Request Limits</h1><p>This entry sets the maximum request length (e.g. attachment size) and duration (also important for attachments-the slower the network, the more time you need to upload an attachment).</p><p>For more information and additional options see this <a href="http://msdn.microsoft.com/en-us/library/e1f13641.aspx"  >MSDN article</a>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Example</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: html/xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;system.web&gt;
	&lt;httpRuntime maxRequestLength=&quot;4096&quot; executionTimeout=&quot;480&quot; /&gt;
&lt;/system.web&gt;

</pre>
</div></div><h1 id="web.configConfiguration-PasswordRecoverySupport">Password Recovery Support</h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Password Recovery Support</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: html/xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;appSettings&gt;
	&lt;add key=&quot;supportsPasswordRecovery&quot; value=&quot;false&quot; /&gt;
&lt;/appSettings&gt;</pre>
</div></div><p>If the authentication is done via LDAP, the password recovery should be disabled. It is not implemented in the provider anyway. The setting is also relevant for user registration.</p><h1 id="web.configConfiguration-Suppressingreporttabs">Suppressing report tabs</h1><p>You application might require to open reports (PDF file) in an external application instead of browser. This can be done by adjusting <code>Startup.cs</code> and to prevent web client from creating empty tabs add following setting.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Suppress Report Tabs Example</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;appSettings&gt;
	&lt;add key=&quot;suppressReportTabs&quot; value=&quot;true&quot; /&gt;
&lt;/appSettings&gt;
</pre>
</div></div><h1 id="web.configConfiguration-E-MailSettings">E-Mail Settings</h1><h2 id="web.configConfiguration-PasswordRESET">Password RESET</h2><p>You have to configure the following settings in order to get the password reset functionality working.</p><p>Please add the following code lines into AppCode/startup.cs file into CreateUserManager() function</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">        // this is optional - you can unlock a user when password has been successfully reset 
		manager.UnlocksOnPasswordReset = true;
 
		// reset password token generation settings      
        DpapiDataProtectionProvider protectionProvider 
            = new DpapiDataProtectionProvider(&quot;Origam&quot;);
        OrigamTokenProvider tp = new OrigamTokenProvider(
            protectionProvider.Create(&quot;Confirmation&quot;));
		// set the token validity interval. If the token is older
		// it return token invalid error message when used
        tp.TokenLifespan = TimeSpan.FromHours(48);
		manager.UserTokenProvider = tp;</pre>
</div></div><p>Please add the following to the web.config of your application</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>User Management Notifications</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: true; theme: Confluence" data-theme="Confluence">&lt;appSettings&gt;
	&lt;add key=&quot;mailFrom&quot; value=&quot;info@yourdomain.com&quot;/&gt;
	&lt;add key=&quot;PortalBaseUrl&quot; value=&quot;http://application.com/&quot; /&gt;
    &lt;!-- the following 2 lines are optional. If not present, the default texts from resources are used --&gt;
	&lt;add key=&quot;RecoverPasswordMail_Subject&quot; value=&quot;Application.com Passwort zurück setzen&quot; /&gt;
	&lt;!-- if the first line of the following file starts with &quot;Subject: &quot; followed by a subject,
		 then the previous key RecoverPasswordMail_Subject is not used.
		 note: Html is supported here at master starting from Feb 2017 --&gt; 
    &lt;add key=&quot;RecoverPasswordMail_BodyFileName&quot; value=&quot;c:\inetpub\wyby\passwordreset.txt&quot; /&gt; 
&lt;/appSettings&gt;</pre>
</div></div><p>The password recovery text file can contain the whole e-mail body, while making it possible to include the following parameters:</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Substitution Text</th><th class="confluenceTh">Replaced with</th></tr><tr><td colspan="1" class="confluenceTd"><p class="p1"><code><strong>&lt;%</strong>UserName<strong>%&gt;</strong></code></p></td><td colspan="1" class="confluenceTd"><p class="p1">The Web site user name of the user.</p></td></tr><tr><td colspan="1" class="confluenceTd"><p class="p1"><code><strong>&lt;%</strong>Name<strong>%&gt;</strong></code></p></td><td colspan="1" class="confluenceTd"><p class="p1">Name of the user.</p></td></tr><tr><td colspan="1" class="confluenceTd"><pre>&lt;%Token%&gt;</pre></td><td colspan="1" class="confluenceTd"><p>Reset password token, need to be sent as 'token' url argument to reset password page</p></td></tr><tr><td colspan="1" class="confluenceTd">&lt;%EscapedUserName%&gt;</td><td colspan="1" class="confluenceTd">The Web site user name of the user (url escaped)</td></tr><tr><td colspan="1" class="confluenceTd">&lt;%TokenValidityHours%&gt;</td><td colspan="1" class="confluenceTd">Number of hours (taken from token provider configuration) - see above</td></tr><tr><td colspan="1" class="confluenceTd">&lt;%FirstName%&gt;</td><td colspan="1" class="confluenceTd">First name of the user.</td></tr><tr><td colspan="1" class="confluenceTd">&lt;%PortalBaseUrl%&gt;</td><td colspan="1" class="confluenceTd">Base url to compose the URL</td></tr><tr><td colspan="1" class="confluenceTd">&lt;%EscapedName%&gt;</td><td colspan="1" class="confluenceTd">Name of the user (Url escaped) <strong>(added in Feb 2017)</strong></td></tr><tr><td colspan="1" class="confluenceTd">&lt;%UserEmail%&gt;</td><td colspan="1" class="confluenceTd">Email of the user <strong>(added in Feb 2017)</strong></td></tr><tr><td colspan="1" class="confluenceTd">&lt;%EscapedUserEmail%&gt;</td><td colspan="1" class="confluenceTd">Email of the user (Url escaped) <strong>(added in Feb 2017)</strong></td></tr></tbody></table></div><p> </p><p>Example of text, html is possible to use only with Master version of Origam, Feb 2017</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Subject: Passwort zurückzusetzen
&lt;html&gt;
Hallo &lt;%Name%&gt;
&lt;br /&gt;&lt;br /&gt;
Klicke auf den Link um dein Passwort zurückzusetzen. Es wird sich eine Seite öffnen auf der Du ein neues Passwort eingeben kannst. 
&lt;br /&gt;&lt;br /&gt;
&lt;a href=&quot;&lt;%PortalBaseUrl%&gt;ResetPassword?token=&lt;%Token%&gt;&amp;Name=&lt;%EscapedName%&gt;&amp;UserName=&lt;%EscapedUserName%&gt;&quot; target=&quot;_blank&quot;&gt;Link&lt;/a&gt;
&lt;br /&gt;&lt;br /&gt;
Wenn du dein Passwort gar nicht zurücksetzten willst, wende dich bitte an info@application.com
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
Wir wünschen dir weiterhin viel Spass beim application.com!
&lt;br /&gt;&lt;br /&gt;
Dein application.com team
&lt;/html&gt;</pre>
</div></div>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 29, 2022 20:33</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
