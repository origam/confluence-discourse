# Active Directory Authentication Setup

# web.config

This entry sets up the correct membership provider.

``` xml
<system.web>
    <membership defaultProvider="asapMembershipProvider">
        <providers>
            <clear />
            <add name="asapMembershipProvider" type="cz.advantages.asap.hosting.utils.LDAPMembershipProvider, LDAPMembershipProvider" defaultDomain="domain"/>
        </providers>
    </membership>
</system.web>
```

# Startup.cs

This entry sets up a default domain, so the user does not have to enter the domain when he logs in. If you do not specify this entry, the user will have to include the domain with his login (e.g. DOMAIN\user.name).

**Default Login Domain**

``` c#
public void Configuration(IAppBuilder app)
{
    ...
    AbstractUserManager.RegisterCreateUserManagerCallback(
        CreateUserManagerWithDomain);
    ...
}

private static AbstractUserManager CreateUserManagerWithDomain()
{
    NetMembershipUserManager userManager = (NetMembershipUserManager)
        NetMembershipUserManager.Create();
    userManager.InjectDomain = "MYDOMAIN";
    return userManager;
}
```
