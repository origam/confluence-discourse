# Adding fields to an entity

Fields are mapped to columns in databases. They can also be displayed in screen sections and therefore in the web application. There are several types of fields. In this tutorial you will learn how to add different types of fields to your entity.

-   [Database Field](#Addingfieldstoanentity-DatabaseField)
-   [Virtual Field](#Addingfieldstoanentity-VirtualField)
-   [Function Call Field](#Addingfieldstoanentity-FunctionCallField)
-   [Aggregated Field](#Addingfieldstoanentity-AggregatedField)
-   [Lookup Field](#Addingfieldstoanentity-LookupField)

### Database Field

1.  Database fields are mapped to physical database columns. Open your project in the Model Browser view and expand Data \> Entities \> YourProjectName. Now you can see all entities in your project. Right-click on the entity to which you want to add a field and select New \> Database Field. You can also reach the menu when you open the entity by a double-click or a right-click and selecting Edit item.  
    ![11731118_320x500](upload://kaMEx0L9Q4JUvdlA59oJAP1qAuZ.png)  
      

2.  Now you can fill in the field attributes. The field is referenced in the model by Name (remember to keep with the naming conventions). Caption is used as a description for users in screens in the web application. AllowsNulls attribute is as a default set to True (the field can remain empty).

    Note that when you set a field as **AllowsNulls**=`False`, the field name in the Model Browser is in bold letters.

    ![11731121_380x500](upload://knrKyN1IqPi3ir80AdHPUCI7f90.png)  
      

3.  Another important attribute is DataType. If you select String, don't forget to also fill the DataLength field. After filling all desired attributes, save the changes.  
    ![11731120_470x341](upload://tv4gyk1LRArmNHr19MlOeqCH3QQ.png)

### Virtual Field

[Virtual field](/t/Virtual-Field) has the same attributes as the database field, but it is not mapped to a physical database field. The steps are the same as when creating a database field, only in the first step select New \> Virtual Field.

### Function Call Field

1.  Another type of field you can choose is the function call field. You can follow the first step as when creating a database field, only in the first step select New \> Function Call. But once you have added a field to your entity, a new subfolder Fields will appear. You can also add new fields by a right-click on Fields \> New \> Function Call.  
    ![11731127_449x177](upload://fGpUlfIf8nsD7XQC5uCyLnX4PxA.png)  
      
2.  Repeating steps 2 and 3 from creating a database field fill in the relevant attributes. Then from the drop-down list select the needed Function and save.  
    ![11731131_425x241](upload://hwsyWL5qo7jIsqW9L9Nw0rgcJGM.png)  
      
3.  Depending on the function you have chosen, function parameters will appear in the Model Browser under the element and you must pass some values to them. In case of the [Concat Function](/t/Concat-Function), you have to add some strings for the function to concatenate. Right-click on **Strings** and select **New** \> **Field Reference**.  
      
    ![11731129_510x241](upload://cmxnBcxNLK2CIpnUERUJ2c3MPdT.png)  
4.  Fill in the Name of the element. Remember that the fields are concatenated in alphabetical order, so choose the names according to the desired order. Select the Field that will be used as a reference and save. Repeat steps 3 and 4 for all fields you want to include in the concatenation.  
      
    ![12124166_434x500](upload://4uHPZCKKwkBwxIRhtzuKCpYcV32.png)

### Aggregated Field

1.  Another field type - the [aggregated field](/t/Aggregated-Field) - creates a calculated field using an aggregate function (Count, Sum, Average, Minimum and Maximum). First you must create a relation to the entity that contains the fields you want to summarize. Right-click on the entity that will contain the aggregated field and select **New** \> **Relationship**.  
      
    ![12124194_519x228](upload://hu0psHJmNBM832MvL0WIoj21GwK.png)  
      
2.  From the drop-down list select the **RelatedEntity**. The field **Name** will be automatically filled with the name of the related entity, but you can change it.  
      
    ![12124195_458x433](upload://mec9futpy4lP2VSJVg7thp4EEdI.png)  
      
3.  After saving you have to add a [Relationship Key](/t/Relationship-Key). Right-click on the relationship and select **New** \> **Key**.  
      
    ![12124232_358x193](upload://i9qF4k1BcazuCBi9YOOFRpDDuHU.png)  
      
4.  The model editor will open. The field **Name** will be automatically filled with the name of the related entity, but you can change it. As the **BaseEntityField** select `Id` and as the **RelatedEntityField** select the corresponding field from the related entity, i.e. a foreign key in the related entity that is linked to the Id of the base entity (you can find a step by step tutorial for creating a foreign key [here](/t/Creating-a-foreign-key)). Save.  
      
    ![12124233_463x303](upload://TpH40fqMIwD46G5qOY18nBGXOA.png)  
      
5.  In case that you don't already have two entities (and database tables) but only one, you can also use the **Create child entity** wizard. Right-click on the name of the parent entity and select **Actions** \> **Create Child Entity**.  
      
    ![12124236_421x383](upload://rk5cnvVLA1ghURTMBuaNiP6bC8N.png)  
      
6.  Fill in the **Child Entity Name** for the new child entity. The **Master Entity** is already filled. There is also an option to add another parent entity. Click on **OK**.  
      
    ![12124235_378x199](upload://zdzKeyku0TARwnVflyZ2HM1RIq1.png)  
      
7.  The wizard will finish all steps for you - it will create a new entity with a foreign key, a relationship between the entities and also an index for the child entity.  
      
    ![12124238_681x273](upload://x2T72Xjz8JOC2v1y2fQJgQ1nVYs.png)  
      
8.  Now that you have two entities in a relationship, you can finally create the aggregated field. Right-click on your entity that will contain the aggregated field and select **New** \> **Aggregated Field**.  
      
    ![12124196_503x186](upload://qCjafDLJDEyxOI68GcQlj4tz2y4.png)  
      
9.  The model editor will open. From a drop-down list select the **AggregationType**. Then select the **Relation** from a drop-down list - this is the entity you have created the relationship to. Then from a drop-down list select the **Field** whose values will be aggregated. The **Name** will be filled automatically, but you can change it. The attributes **Caption**, **DataLength** and **DataType** will be inherited from the selected **Field**. Save.  
      
    ![12124245_489x499](upload://5smDr0Ad2QPhLPCc3PVHR3AQEOx.png)  
      
10. You have finished creating the aggregated field. One last task remains if you want the field to recalculate automatically with every change in the detail data. You have to add the related entity as a child entity to the master entity's [data structure](/t/Data-Structures). If you don't have one yet, go to **Entities** and right-click on the entity's name and select **Actions** \> **Create Data Structure** and it will be generated.  
      
    ![12124246_546x335](upload://w5KuPxUlDqBkxtK9lwe9geU4YOn.png)  
      
11. Expand **Data Structures** in the **Data Model** in the Model Browser. Then expand the folder of your project and find the data structure of your master entity. Expand it and then again expand the subfolder **Entities**. Right-click on the entity and select **New** \> **Entity**.  
      
    ![12124248_479x477](upload://mkgMiIzJbc6Lm38B6cFZf0iIE8q.png)  
      
12. In the new tab find the attribute **Entity** and from a drop-down list select your child entity. The **Name** will be filled automatically. Save and you have completed the process of creating an aggregated field.  
      
    ![12124249_466x447](upload://5WAdcqdn3H7z6PeS3zv0P8jSBmH.png)  
      

### Lookup Field

1.  A [lookup field](/t/Lookup-Field) is used to display values from another entity using a [lookup](/t/Lookups). First you must create a lookup for the entity that contains the field with values you want to display. You can find a step by step tutorial how to create a lookup [here](/t/Creating-a-lookup). Then you will also need a foreign key to that entity. A detailed tutorial is [here](/t/Creating-a-foreign-key). Now to create the lookup field right-click on the entity where you want the field placed and select **New** \> **Lookup Field**.  
      
    ![12124244_416x193](upload://zHoHBGgy7JnZBU5aBtsvK56yiCv.png)  
      
2.  The model editor will open. Fill in the **Name** of the field and the **Caption** (a name shown in the user interface). From a drop-down list select as the **Field** the foreign key pointing to the entity with the looked up values. Finally, as the **Lookup** select your lookup from a drop-down list. Save and the lookup field will appear in your entity.  
      
    ![12124259_511x404](upload://isDNWF6Mdv5V6TpKNJKhpasQXmR.png)  
      
      
