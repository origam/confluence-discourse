# Lookups

Lookups define the way how to fill-in [Drop-Down](/t/Drop-down-Box) lists and how to translate id's to names both in the user interface and business logic.

Lookups are the Swiss Army knife of the data model. Often you will need to get a list of values which can be entered to a field (e.g. in a drop-down list) or you need to look-up a value by a specified key (e.g. getting a customer's name by providing an Id of his record). Data Lookups are the tool for getting this done.

Every data lookup provides 2 main features:

-   List: Provides a list of values (so you can possibly pick one)
-   Value: Gives a value depending on an Id passed (so you can display something understandable to the user when you have only Id)

Some data lookup consumers use both features (list and value), some use only one of them.

Usage

The Model elements which reference data lookups:

-   [Entity Field](/t/Fields) (DefaultLookup attribute)

-   [Data Structure Field](/t/Data-Structure-Field) (DefaultLookup attribute)

-   [DropDown widget](/t/Drop-down-Box) (Lookup attribute)

-   [Charts](/t/Charts)

-   [Calendar View](/t/Calendar-View)

-   [Pipeline (Kanban) View](/t/Pipeline-Kanban-View)

-   [TagInput](/t/TagInput)

-   [XSL Transformation](/t/Transformations) ([LookupValue](/t/LookupValue), [LookupList](/t/LookupList) and [LookupOrCreate](/t/LookupOrCreate) functions)

# Scenarios

<table class="confluenceTable">
<tbody>
<tr class="odd">
<th class="confluenceTh">Drop-Down Lists in GUI</th>
<td class="confluenceTd">Drop-Down lists are user controls that allow user to pick up a value from a list. They also display a current value instead of displaying an Id which is stored in the record's field. They use both Value and List features of Data Lookups
<div class="orderedlist">
<ol>
<li><p>Drop-down list is loaded with the lookup list</p></li>
<li><p>If IsTree attribute is set, then Drop-down part of the drop-down control is rendered as s treeview with a hierarchical view to the data.</p></li>
<li><p>Every time a value is being displayed to the user, the Value is looked up by the Id.</p></li>
</ol>
</div></td>
</tr>
<tr class="even">
<th class="confluenceTh">Entity Model SQL</th>
<td class="confluenceTd">When designing reports, record Id's are usually NOT the data being displayed to the user. Instead, we want to display some understandable text. The <a href="/t/Data-Structures">Data Structure</a>'s UseLookupValue attribute or entity <a href="/t/Lookup-Field">Lookup Field</a> allow you to substitute the Id with a looked-up value directly in the database query by generating a <strong>SQL subquery</strong>. This way data structures can stay simple and data queries faster.
<p>Data Structure lookup value substitution uses only the <strong>Value</strong> part of the lookup. It does not use the <strong>List</strong> part.</p></td>
</tr>
<tr class="odd">
<th class="confluenceTh">Data Audit Log</th>
<td class="confluenceTd">When data auditing is enabled in the data entity, the data service stores an audit trail of all the changes that happened because of data editing done by the user or the workflow. When displaying the audit log, the user does not want to see which Id changed to another Id, he wants to see, what value was referenced by it at that time. Therefore before saving the audit record, the data service queries the lookup for the lookup value and stores that value into the audit together with the Id.
<p>Auditing also uses only the <strong>Value</strong> part of the lookup. It does not use the <strong>List</strong> part.</p></td>
</tr>
<tr class="even">
<th class="confluenceTh">XSL Stylesheet Transformations in Workflows</th>
<td class="confluenceTd"><p>Sometimes data transformations require substituting Id's which arrive with the transformation data source with a looked-up value. A good example can be when we get a business case record and we need to generate an e-mail, knowing only customer's Id, stored in the business case.</p>
<p>From the XSL stylesheet we can call a <a href="/t/LookupValue">LookupValue</a> or a <a href="/t/LookupList">LookupList</a> function, which will return us the value instead of the Id.</p>
<p>The <a href="/t/LookupOrCreate">LookupOrCreate</a> function allows you to create a record if it does not exist in a single statement.</p>
<p>The <strong>LookupValue</strong> uses the <strong>Value</strong> part of the lookup while the <strong>LookupList</strong> uses the <strong>List</strong> part of the lookup.</p></td>
</tr>
</tbody>
</table>

# Attributes

## List Part

<table class="confluenceTable">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<th class="confluenceTh">AlwaysAllowReturnToForm</th>
<td class="confluenceTd">The <strong>Select and Return to &lt;lookup page&gt;</strong> button will be always shown even when the lookup list is filtered.</td>
</tr>
<tr class="even">
<th class="confluenceTh">IsTree</th>
<td class="confluenceTd">Indicates that the lookup has a hierarchical structure. You have to specify the <code>TreeParentMember</code> attribute if this value is set to <code>True</code>.</td>
</tr>
<tr class="odd">
<th class="confluenceTh">TreeParentMember</th>
<td class="confluenceTd">Specifies the field in the <code>ListDataStructure</code>, which points to the parent record. E.g. in a folder structure type of entity, this would be the <code>refParentFolderId</code>, which would point to an <code>Id</code> in the same entity.</td>
</tr>
<tr class="even">
<th class="confluenceTh">ListDataStructure</th>
<td class="confluenceTd"><p>A Reference to the <a href="/t/Data-Structures">data structure</a>, using which the data for the lookup list will be loaded. The data will loaded from the root entity.</p>
<p>The <a href="/t/LookupOrCreate">LookupOrCreate</a> this data structure is used for inserting data. For this work it has to have <strong>AllFields</strong> <code>= True</code>.</p></td>
</tr>
<tr class="odd">
<th class="confluenceTh">ListMethod</th>
<td class="confluenceTd">Specifies an optional <a href="/t/Filter-Sets">filter set</a> for the list part of the data lookup. If the filter contains parameters, these parameters must be provided when requesting the list. This happens e.g. by setting ParameterMappings in a <a href="/t/Drop-down-Box">DropDown</a> widget.</td>
</tr>
<tr class="even">
<th class="confluenceTh">ListSortSet</th>
<td class="confluenceTd">Optional <a href="/t/Sort-Sets">sort set</a> that will change the way how the data will be sorted when displayed using the <a href="/t/Drop-down-Box">Drop-Down</a> list. By default the data are sorted by the first column alphabetically in an ascending order.</td>
</tr>
<tr class="odd">
<th class="confluenceTh">ListDisplayMember</th>
<td class="confluenceTd">Specifies a field from the <code>ListDataStructure</code> root entity, which is displayed to the user in a drop-down list. E.g. <code>Name</code>. Multiple fields can be specified, delimited by semicolon (;).</td>
</tr>
<tr class="even">
<th class="confluenceTh">ListValueMember</th>
<td class="confluenceTd">Specifies a field from the <code>ListDataStructure</code> root entity, which will be used as a key to be returned when the user will select an item from the drop-down list. E.g. customer's <code>Id</code>.</td>
</tr>
</tbody>
</table>

## Value Part

<table class="confluenceTable">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<th class="confluenceTh">ValueDataStructure</th>
<td class="confluenceTd">Reference to the data structure, which will be used to look up a single value in the data source.</td>
</tr>
<tr class="even">
<th class="confluenceTh">ValueMethod</th>
<td class="confluenceTd"><p>Specifies a <a href="/t/Filter-Sets">filter set</a> for getting a single looked up value.</p>
<h3 id="Lookups-DATAMODELUSAGE">DATA MODEL USAGE</h3>
<p>When the lookup is used in the data model (either as Lookup Field or in a data structure by setting <code>UseLookupValue = True</code> this filter must have 1 and only 1 parameter, which results basically in filtering by a primary key.</p>
<h3 id="Lookups-XSLTUSAGE">XSLT USAGE</h3>
<p>When used via <a href="/t/LookupValue">LookupValue</a> XSLT function you can have many parameters. Then you will use it to return a single value but using multiple parameters. If more than 1 value exists in the database, it always returns the TOP one. You can take advantage of using a <code>ValueSortSet</code> attribute to sort data in a way that it will e.g. return the highest value etc.</p></td>
</tr>
<tr class="odd">
<th class="confluenceTh">ValueSortSet</th>
<td class="confluenceTd">Specifies a <a href="/t/Sort-Sets">sort set</a> by which the data should be sorted. Since only 1 value can be returned it is only useful if you know that there exist multiple results but you need to control which of them will be returned (e.g. the highest number).</td>
</tr>
<tr class="even">
<th class="confluenceTh">ValueDisplayMember</th>
<td class="confluenceTd">Specifies a field from the <code>ValueDataStructure</code> root entity, which will be used for displaying the resulting looked-up value to the user e.g. in a drop-down list. E.g. <code>Name</code>. Multiple fields can be specified, delimited by semicolon (;), the displayed values will be delimited by comma (,).</td>
</tr>
<tr class="odd">
<th class="confluenceTh">ValueValueMember</th>
<td class="confluenceTd">not used at the moment</td>
</tr>
</tbody>
</table>

## MODEL STRUCTURE

|                      |                      |                      |                                     |
|----------------------|----------------------|----------------------|-------------------------------------|
| ![12124376_16x16](upload://8hjvpzZvfjZuAhwQ8BiODZlWkHu.png) | Lookups              |                      |                                     |
|                      | ![12124439_16x16](upload://7e5joUHtF8CjkiWVHCTDzyEZjt8.png) | Data Service Lookup  |                                     |
|                      |                      | ![12124497_16x16](upload://hGXughuFlQqtt2QvlWBxDN9NMhv.png) | [Data Service Tooltip](/t/Tooltips) |
|                      |                      | ![12124390_16x16](upload://1Ie2KIFeF9qpxTIpQ85zEv5GZBd.png) | [Menu Binding](/t/Menu-Bindings)    |
