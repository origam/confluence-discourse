<!DOCTYPE html>
<html>
    <head>
        <title>ORIGAM Documentation : How To Process Text Files Using Work Queue</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ORIGAM Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Enterprise-Home_589829.html">ORIGAM Enterprise Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="How-to-articles_7831641.html">How-to articles</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ORIGAM Documentation : How To Process Text Files Using Work Queue
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Tomáš Vavrda</span>, last modified on Sep 04, 2014
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="HowToProcessTextFilesUsingWorkQueue-1.CheckSettings">1. Check Settings</h1><p>Make sure these parameters are set in your AsapSettings.config file:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: html/xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;LoadExternalWorkQueues&gt;true&lt;/LoadExternalWorkQueues&gt;
&lt;ExternalWorkQueueCheckPeriod&gt;180&lt;/ExternalWorkQueueCheckPeriod&gt;</pre>
</div></div><p>Set up the ExternalWorkQUeueCheckPeriod to any number of seconds you want the files being checked.</p><h1 id="HowToProcessTextFilesUsingWorkQueue-2.CreateaQueueCommandinArchitect">2. Create a Queue Command in Architect</h1><p>Files will be available in a work queue that we will configure later. When files are in the queue we need to process them. This is done using <a class="createlink" href="/pages/createpage.action?spaceKey=architect&amp;title=Work+Queue+Command&amp;linkCreation=true&amp;fromPageId=2719746">Work Queue Commands</a>. Work Queue Command is basically a button in a work queue that, when pressed, will execute a workflow, passing the selected queue entries.</p><h2 id="HowToProcessTextFilesUsingWorkQueue-2.1.CreateaWorkflow">2.1. Create a Workflow</h2><p>First create a processing workflow.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2719746/2785283.png" data-image-src="attachments/2719746/2785283.png" data-unresolved-comment-count="0" data-linked-resource-id="2785283" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 6:32:34.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span></p><p>What you need to do is to create a context store WQ_TextFile. This context will contain a work queue entries selected by the user.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Note</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The WQ_TextFile context can contain more than one entries in case you allowed the user to select multiple entries.</p></div></div><p>To get to the actual text you need to use the XPath <strong>/ROOT/WorkQueueEntry/Data.</strong></p><p>The way how you process the file is up on you. You can parse it using XSLT transformation or you can use the <a class="createlink" href="/pages/createpage.action?spaceKey=architect&amp;title=FileService.ReadTextFile+Method&amp;linkCreation=true&amp;fromPageId=2719746">FileService.ReadTextFile method</a> to automatically parse CSV files.</p><h2 id="HowToProcessTextFilesUsingWorkQueue-2.2CreateaWorkQueueCommand">2.2 Create a Work Queue Command</h2><p>Now you can connect the processing workflow to the work queue class.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2719746/2785289.png" data-image-src="attachments/2719746/2785289.png" data-unresolved-comment-count="0" data-linked-resource-id="2785289" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 7:10:10.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span></p><ul><li>Right click on TextFile work queue class and choose <strong>New &gt; Workflow Command</strong></li><li>Specify the following properties<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2719746/2785285.png" data-image-src="attachments/2719746/2785285.png" data-unresolved-comment-count="0" data-linked-resource-id="2785285" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 6:41:41.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span><br/>You should specify <strong>Mode=MultipleCheckboxes</strong> so the user can select more files and process them at once.<br/>The <strong>Name</strong> property will be used to identify the command later in the work queue configuration.</li><li>Save the command.</li><li>Now right click on the new command and choose <strong>New &gt; Parameter Mapping</strong> (with the dot, not a question mark).</li><li>Specify the following properties:<br/><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2719746/2785287.png" data-image-src="attachments/2719746/2785287.png" data-unresolved-comment-count="0" data-linked-resource-id="2785287" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 6:46:12.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span><br/>This way you pass the selected work queue entries to your processing workflow.</li></ul><h1 id="HowToProcessTextFilesUsingWorkQueue-3.SetUpaWorkQueue">3. Set Up a Work Queue</h1><p>In Client, set up a work queue using a <a class="createlink" href="/pages/createpage.action?spaceKey=architect&amp;title=TextFile+Work+Queue+Class&amp;linkCreation=true&amp;fromPageId=2719746">TextFile work queue class</a>.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="500" src="attachments/2719746/2785281.png" data-image-src="attachments/2719746/2785281.png" data-unresolved-comment-count="0" data-linked-resource-id="2785281" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 6:18:20.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span></p><p>Use <strong>path</strong> parameter to specify the folder in which the files are contained, <strong>searchPattern</strong> to specify the file name and <strong>encoding</strong> to indicate the code page of the text being imported.</p><p>After you save the work queue definition and set it Active the files will start to being imported immediately.´</p><h1 id="HowToProcessTextFilesUsingWorkQueue-4.SetUpaWorkQueueCommand">4. Set Up a Work Queue Command</h1><p>Now we need to assign the processing commands to this queue. As TextFile work queue class can have multiple commands defined (for different work queues), each work queue has to have some of the commands assigned. This is done one the <strong>Commands tab</strong>.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2719746/2785288.png" data-image-src="attachments/2719746/2785288.png" data-unresolved-comment-count="0" data-linked-resource-id="2785288" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2012-6-14 6:53:58.png" data-base-url="https://confluence.origam.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2719746" data-linked-resource-container-version="4" alt=""></span></p><p>Typically you create two commands. One for import, second for manually deleting the file from the queue.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">Order</td><td class="confluenceTd">Order in which buttons will be ordered in the toolbar.</td></tr><tr><td class="confluenceTd">Text</td><td class="confluenceTd">Button label.</td></tr><tr><td colspan="1" class="confluenceTd">Command</td><td colspan="1" class="confluenceTd">Name of the command specified in Architect.</td></tr><tr><td colspan="1" class="confluenceTd">Error Queue</td><td colspan="1" class="confluenceTd"><p>Another work queue you can create where entries that produced errors while automatically processed will be moved. The target queue has to be of the same type (TextFile) as the main queue.</p><p>See Process Automatically field.</p></td></tr><tr><td colspan="1" class="confluenceTd">Process Automatically</td><td colspan="1" class="confluenceTd">If checked, the command will be executed automatically immediatelly after the file gets imported to the queue. No user action is needed. If processing fails, the entry is marked as error (turns red in the queue list). If Error Queue is specified, the file is moved to the error queue.</td></tr></tbody></table></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785281.png">image2012-6-14 6:18:20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785282.png">image2012-6-14 6:31:56.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785283.png">image2012-6-14 6:32:34.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785284.png">image2012-6-14 6:40:11.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785285.png">image2012-6-14 6:41:41.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785286.png">image2012-6-14 6:45:45.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785287.png">image2012-6-14 6:46:12.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785288.png">image2012-6-14 6:53:58.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2719746/2785289.png">image2012-6-14 7:10:10.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 29, 2022 20:33</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
