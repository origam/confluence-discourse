<!DOCTYPE html>
<html>
    <head>
        <title>ORIGAM Documentation : Work Queue Notifications</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">ORIGAM Documentation</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Enterprise-Home_589829.html">ORIGAM Enterprise Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="ORIGAM-Runtime_8716600.html">ORIGAM Runtime</a></span>
                            </li>
                                                    <li>
                                <span><a href="Components_5668873.html">Components</a></span>
                            </li>
                                                    <li>
                                <span><a href="Work-Queues_6062106.html">Work Queues</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            ORIGAM Documentation : Work Queue Notifications
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Tomáš Vavrda</span>, last modified by <span class='editor'> Václav Urbánek</span> on Apr 11, 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Notifications allow you to send an e-mail, SMS or any kind of a notification whenever a message appears in the queue.In order to configure a notification you need to set up:</p><ul><li>Notification Template</li><li>Notification</li><li>Notification Sender</li><li>Notification Recipients</li></ul><h1 id="WorkQueueNotifications-NotificationTemplate">Notification Template</h1><p>This is an XSLT template which defines the content of the message. The XML source can be either:</p><ul><li>Work queue message (default)</li><li>Custom data source</li></ul><p>If you need more information than what the work queue message contains you can set up a custom data source for the notification. For that you have to configure the <a href="Work-Queue-Classes_4620319.html">work queue class </a>and set <strong>NotificationStructure</strong>, <strong>NotificationLoadMethod</strong> and <strong>NotificationFilterPkParameter </strong>attributes.</p><h2 id="WorkQueueNotifications-Localization">Localization</h2><p>The <strong>Notification Templates</strong> screen (contained in the <strong>Root Menu</strong> package) contains a Localization tab. There you can put different templates for different languages. Based on the language of the notification the correct template will be selected.</p><h2 id="WorkQueueNotifications-DataSource">Data Source</h2><p>This is how the default work queue message data source can look like:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;WorkQueueEntry
    refId=&quot;c0bea3a0-757e-4306-8fde-6609f10488cd&quot; 
    refWorkQueueId=&quot;719e9a07-db2f-43c1-9992-03021346007e&quot; 
    RecordCreated=&quot;2015-09-24T13:24:46.01+02:00&quot; 
    IsLocked=&quot;false&quot; 
    Id=&quot;c0bea3a0-757e-4306-8fde-6609f10488cd&quot; 
    RecordCreatedBy=&quot;53932317-3c83-40d5-aa52-c6cd33803bef&quot;
    FileName=&quot;test.txt&quot;
    &gt;
 &lt;Data&gt;example text file contents&lt;/Data&gt;
&lt;/WorkQueueEntry&gt;
</pre>
</div></div><p>If you defined a custom data structure, the XML will look the way you defined the structure.</p><h2 id="WorkQueueNotifications-Template">Template</h2><p>The notification's template structure is simple. You need to create <strong>AsapNotification</strong> element with <strong>Subject</strong> attribute and <strong>Body</strong> inner element. These will be used typically by the e-mail notifications. In case of e.g. SMS notifications the Subject part would be omitted.</p><p>This is how a template can look like, but <strong>BEWARE</strong>, the following template is suitable only if you use a WorkQueueEntry itself as a notification source, so only if you don't define any special <strong>NotificationStructure</strong>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;1.0&quot;
	xmlns:AS=&quot;http://schema.advantages.cz/AsapFunctions&quot;
	xmlns:date=&quot;http://exslt.org/dates-and-times&quot; exclude-result-prefixes=&quot;AS date&quot;&gt;
	
	&lt;xsl:template match=&quot;ROOT&quot;&gt;
		&lt;ROOT&gt;
			&lt;xsl:apply-templates select=&quot;WorkQueueEntry&quot;/&gt;
		&lt;/ROOT&gt;
	&lt;/xsl:template&gt;

	&lt;xsl:template match=&quot;WorkQueueEntry&quot;&gt;
		&lt;AsapNotification
			Subject=&quot;{concat(&#39;New File: &#39;, @FileName)}&quot;
			&gt;
			&lt;Body&gt;
               A new file arrived into the queue.
			&lt;/Body&gt;
		&lt;/AsapNotification&gt;
	&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</pre>
</div></div><h1 id="WorkQueueNotifications-Notification">Notification</h1><p>When your template is ready you need to assign it to the work queue in the <a href="Work-Queues_6062106.html">Work Queues</a> screen on the <strong>Notifications</strong> tab. There you select</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Description</th><td class="confluenceTd">A description of your notification</td></tr><tr><th class="confluenceTh">Event</th><td class="confluenceTd">An event on which the notification will be sent. The only supported event is <strong>Message Creation.</strong></td></tr><tr><th colspan="1" class="confluenceTh">Template</th><td colspan="1" class="confluenceTd">A template you previously created.</td></tr></tbody></table></div><p>For each notification you will also need to define a sender and one or multiple recipients. You do this on the following <strong>Notification – Senders</strong> and <strong>Notification – Recipients</strong> tabs. Please note that these tabs are always related to the record selected in the <strong>Notification</strong> tab.</p><h1 id="WorkQueueNotifications-NotificationSenders">Notification Senders</h1><p>On this tab you define one or multiple senders. The reason why you might need multiple senders is when you will send notifications through multiple channels so you can select a sender for each channel.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Type</th><td class="confluenceTd">Sender type. Typically this will be an <strong>Inserted Value</strong>. In case you will need e.g. to choose a sender depending on the context, you need to set up your <a href="Extending-Work-Queue-Notifications-With-a-New-Contact-Type_9404528.html">own notification contact type</a>.</td></tr><tr><th class="confluenceTh">Channel</th><td class="confluenceTd">The type of the notification channel, e.g. E-mail or SMS. Only E-mail channel is built-in.</td></tr><tr><th colspan="1" class="confluenceTh">Value</th><td colspan="1" class="confluenceTd">In case you selected a <strong>Type</strong> = <code>Inserted</code> Value you can insert the value into this field. It will be typically an e-mail address.</td></tr></tbody></table></div><h1 id="WorkQueueNotifications-NotificationRecipients">Notification Recipients</h1><p>On this tab you can define one or multiple recipients of your notification. You can define recipients based on different notification channels but you can also define multiple recipients for the same channel. The settings are the same as for <strong>Notification Senders</strong>.</p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 29, 2022 20:33</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
